\hypertarget{supervisor_8c}{}\section{src/supervisor.c File Reference}
\label{supervisor_8c}\index{src/supervisor.\+c@{src/supervisor.\+c}}


Supervisor program module.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include $<$sys/mman.\+h$>$}\newline
{\ttfamily \#include $<$fcntl.\+h$>$}\newline
{\ttfamily \#include $<$semaphore.\+h$>$}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include \char`\"{}shm.\+h\char`\"{}}\newline
Include dependency graph for supervisor.\+c\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{supervisor_8c_a2aa82e63b1e77fbf2bb1537d2c76e84c}{circ\+\_\+buf\+\_\+read} (struct \hyperlink{structedge}{edge} $\ast$sol)
\begin{DoxyCompactList}\small\item\em This function reads a solution from the circular buffer. \end{DoxyCompactList}\item 
static void \hyperlink{supervisor_8c_a5c6551bf9ea9cf51ae7f2076c4cbe8ef}{cleanup} (void)
\begin{DoxyCompactList}\small\item\em This function reads a solution from the circular buffer. \end{DoxyCompactList}\item 
static void \hyperlink{supervisor_8c_a0c924bf1febf2ed02cc426268b56b74e}{setup\+\_\+shm} (void)
\begin{DoxyCompactList}\small\item\em This function sets up the shared memory and semaphores. \end{DoxyCompactList}\item 
static void \hyperlink{supervisor_8c_a366471b5822de7615f33cbe5eab9726a}{sig\+\_\+handler} (int signo)
\begin{DoxyCompactList}\small\item\em This function handles S\+I\+G\+I\+NT and S\+I\+G\+T\+E\+RM and signals the generators to terminate. \end{DoxyCompactList}\item 
static void \hyperlink{supervisor_8c_ad96d407a911fbb914fa8e4cfbf2faf0f}{usage} (void)
\begin{DoxyCompactList}\small\item\em This function writes helpful usage information about the program to stderr. \end{DoxyCompactList}\item 
int \hyperlink{supervisor_8c_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em This function repeatedly calls the reading function to read solutions to provided by a generator. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{supervisor_8c_a4686214ab41fba7aff38128387c98c29}{best\+\_\+sol} = \hyperlink{shm_8h_a8b5839f71a3b6e7d64b2d5e9967e3dd1}{B\+U\+F\+\_\+\+L\+EN}+1
\item 
sem\+\_\+t $\ast$ \hyperlink{supervisor_8c_a7d6e7e298780336afe03f2b257e3f11c}{free\+\_\+sem}
\item 
sem\+\_\+t $\ast$ \hyperlink{supervisor_8c_a51687de486030b9fac58480e3112f0cc}{used\+\_\+sem}
\item 
sem\+\_\+t $\ast$ \hyperlink{supervisor_8c_a9b044b36aa51f6b7a4c9fc725e0a274e}{mutex}
\item 
struct \hyperlink{structshm}{shm} $\ast$ \hyperlink{supervisor_8c_aa09ac89a5ada5690d334f73da8ce2258}{myshm}
\item 
static char $\ast$ \hyperlink{supervisor_8c_aad73ccafdb96b6eda42fd71c56cb2d33}{pgm\+\_\+name}
\item 
static int \hyperlink{supervisor_8c_a982799cad8860676b1ff27b9efbd1992}{read\+\_\+pos} = 0
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Supervisor program module. 

\begin{DoxyAuthor}{Author}
Daniel Schloms \href{mailto:e11701253@student.tuwien.ac.at}{\tt e11701253@student.\+tuwien.\+ac.\+at} 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
12.\+01.\+19
\end{DoxyDate}
This program sets up shared memory and reads solutions to the 3-\/colour problem provided by a generator. 

\subsection{Function Documentation}
\mbox{\Hypertarget{supervisor_8c_a2aa82e63b1e77fbf2bb1537d2c76e84c}\label{supervisor_8c_a2aa82e63b1e77fbf2bb1537d2c76e84c}} 
\index{supervisor.\+c@{supervisor.\+c}!circ\+\_\+buf\+\_\+read@{circ\+\_\+buf\+\_\+read}}
\index{circ\+\_\+buf\+\_\+read@{circ\+\_\+buf\+\_\+read}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{circ\+\_\+buf\+\_\+read()}{circ\_buf\_read()}}
{\footnotesize\ttfamily static void circ\+\_\+buf\+\_\+read (\begin{DoxyParamCaption}\item[{struct \hyperlink{structedge}{edge} $\ast$}]{sol }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



This function reads a solution from the circular buffer. 

Reading function


\begin{DoxyParams}{Parameters}
{\em sol} & Struct that contains 2 vertices and represents an edge. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{supervisor_8c_a5c6551bf9ea9cf51ae7f2076c4cbe8ef}\label{supervisor_8c_a5c6551bf9ea9cf51ae7f2076c4cbe8ef}} 
\index{supervisor.\+c@{supervisor.\+c}!cleanup@{cleanup}}
\index{cleanup@{cleanup}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{cleanup()}{cleanup()}}
{\footnotesize\ttfamily static void cleanup (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



This function reads a solution from the circular buffer. 

Cleanup function


\begin{DoxyParams}{Parameters}
{\em sol} & Struct that contains 2 vertices and represents an edge. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{supervisor_8c_a0ddf1224851353fc92bfbff6f499fa97}\label{supervisor_8c_a0ddf1224851353fc92bfbff6f499fa97}} 
\index{supervisor.\+c@{supervisor.\+c}!main@{main}}
\index{main@{main}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



This function repeatedly calls the reading function to read solutions to provided by a generator. 

Program entry point.

global variables\+: pgm\+\_\+name, free\+\_\+sem, used\+\_\+sem, mutex, myshm 
\begin{DoxyParams}{Parameters}
{\em argc} & The argument counter. \\
\hline
{\em argv} & The argument vector. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns E\+X\+I\+T\+\_\+\+F\+A\+I\+L\+U\+RE if there is an error, otherwise \hyperlink{supervisor_8c_a366471b5822de7615f33cbe5eab9726a}{sig\+\_\+handler()} or \hyperlink{supervisor_8c_a2aa82e63b1e77fbf2bb1537d2c76e84c}{circ\+\_\+buf\+\_\+read()} will terminate the program. 
\end{DoxyReturn}
\mbox{\Hypertarget{supervisor_8c_a0c924bf1febf2ed02cc426268b56b74e}\label{supervisor_8c_a0c924bf1febf2ed02cc426268b56b74e}} 
\index{supervisor.\+c@{supervisor.\+c}!setup\+\_\+shm@{setup\+\_\+shm}}
\index{setup\+\_\+shm@{setup\+\_\+shm}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{setup\+\_\+shm()}{setup\_shm()}}
{\footnotesize\ttfamily static void setup\+\_\+shm (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



This function sets up the shared memory and semaphores. 

S\+H\+M-\/\+Setup funciton \mbox{\Hypertarget{supervisor_8c_a366471b5822de7615f33cbe5eab9726a}\label{supervisor_8c_a366471b5822de7615f33cbe5eab9726a}} 
\index{supervisor.\+c@{supervisor.\+c}!sig\+\_\+handler@{sig\+\_\+handler}}
\index{sig\+\_\+handler@{sig\+\_\+handler}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{sig\+\_\+handler()}{sig\_handler()}}
{\footnotesize\ttfamily static void sig\+\_\+handler (\begin{DoxyParamCaption}\item[{int}]{signo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



This function handles S\+I\+G\+I\+NT and S\+I\+G\+T\+E\+RM and signals the generators to terminate. 

Signal handler.

global variables\+: pgm\+\_\+name \mbox{\Hypertarget{supervisor_8c_ad96d407a911fbb914fa8e4cfbf2faf0f}\label{supervisor_8c_ad96d407a911fbb914fa8e4cfbf2faf0f}} 
\index{supervisor.\+c@{supervisor.\+c}!usage@{usage}}
\index{usage@{usage}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{usage()}{usage()}}
{\footnotesize\ttfamily static void usage (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



This function writes helpful usage information about the program to stderr. 

Usage function.

global variables\+: pgm\+\_\+name 

\subsection{Variable Documentation}
\mbox{\Hypertarget{supervisor_8c_a4686214ab41fba7aff38128387c98c29}\label{supervisor_8c_a4686214ab41fba7aff38128387c98c29}} 
\index{supervisor.\+c@{supervisor.\+c}!best\+\_\+sol@{best\+\_\+sol}}
\index{best\+\_\+sol@{best\+\_\+sol}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{best\+\_\+sol}{best\_sol}}
{\footnotesize\ttfamily int best\+\_\+sol = \hyperlink{shm_8h_a8b5839f71a3b6e7d64b2d5e9967e3dd1}{B\+U\+F\+\_\+\+L\+EN}+1\hspace{0.3cm}{\ttfamily [static]}}

Number of edges in the best solution so far \mbox{\Hypertarget{supervisor_8c_a7d6e7e298780336afe03f2b257e3f11c}\label{supervisor_8c_a7d6e7e298780336afe03f2b257e3f11c}} 
\index{supervisor.\+c@{supervisor.\+c}!free\+\_\+sem@{free\+\_\+sem}}
\index{free\+\_\+sem@{free\+\_\+sem}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{free\+\_\+sem}{free\_sem}}
{\footnotesize\ttfamily sem\+\_\+t$\ast$ free\+\_\+sem}

Tracks free space in the circular buffer \mbox{\Hypertarget{supervisor_8c_a9b044b36aa51f6b7a4c9fc725e0a274e}\label{supervisor_8c_a9b044b36aa51f6b7a4c9fc725e0a274e}} 
\index{supervisor.\+c@{supervisor.\+c}!mutex@{mutex}}
\index{mutex@{mutex}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{mutex}{mutex}}
{\footnotesize\ttfamily sem\+\_\+t$\ast$ mutex}

Ensures that only one generator at a time has write access \mbox{\Hypertarget{supervisor_8c_aa09ac89a5ada5690d334f73da8ce2258}\label{supervisor_8c_aa09ac89a5ada5690d334f73da8ce2258}} 
\index{supervisor.\+c@{supervisor.\+c}!myshm@{myshm}}
\index{myshm@{myshm}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{myshm}{myshm}}
{\footnotesize\ttfamily struct \hyperlink{structshm}{shm}$\ast$ myshm}

Shared memory \mbox{\Hypertarget{supervisor_8c_aad73ccafdb96b6eda42fd71c56cb2d33}\label{supervisor_8c_aad73ccafdb96b6eda42fd71c56cb2d33}} 
\index{supervisor.\+c@{supervisor.\+c}!pgm\+\_\+name@{pgm\+\_\+name}}
\index{pgm\+\_\+name@{pgm\+\_\+name}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{pgm\+\_\+name}{pgm\_name}}
{\footnotesize\ttfamily char$\ast$ pgm\+\_\+name\hspace{0.3cm}{\ttfamily [static]}}

Program name \mbox{\Hypertarget{supervisor_8c_a982799cad8860676b1ff27b9efbd1992}\label{supervisor_8c_a982799cad8860676b1ff27b9efbd1992}} 
\index{supervisor.\+c@{supervisor.\+c}!read\+\_\+pos@{read\+\_\+pos}}
\index{read\+\_\+pos@{read\+\_\+pos}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{read\+\_\+pos}{read\_pos}}
{\footnotesize\ttfamily int read\+\_\+pos = 0\hspace{0.3cm}{\ttfamily [static]}}

Reading position in the circular buffer \mbox{\Hypertarget{supervisor_8c_a51687de486030b9fac58480e3112f0cc}\label{supervisor_8c_a51687de486030b9fac58480e3112f0cc}} 
\index{supervisor.\+c@{supervisor.\+c}!used\+\_\+sem@{used\+\_\+sem}}
\index{used\+\_\+sem@{used\+\_\+sem}!supervisor.\+c@{supervisor.\+c}}
\subsubsection{\texorpdfstring{used\+\_\+sem}{used\_sem}}
{\footnotesize\ttfamily sem\+\_\+t$\ast$ used\+\_\+sem}

Tracks used space in the circular buffer 